## –ü–æ–¥–Ω–∏–º–∞–µ–º —Å–≤–æ–π OpenVPN —Å–µ—Ä–≤–µ—Ä –∑–∞ –ø–∞—Ä—É –º–∏–Ω—É—Ç.
![preview](/img/003.png)
### VDS: Virtual Dedicated Server
–í–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è [–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä](https://ru.wikipedia.org/wiki/VPS) –≤ –ï–≤—Ä–æ–ø–µ —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤ –†–æ—Å—Å–∏–∏ —Ä–µ—Å—É—Ä—Å—ã, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–∏–µ–º–ª–∏–º—ã–π –ø–∏–Ω–≥. 
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ä–≤–µ—Ä–∞ - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ, –ø–æ —Å—É—Ç–∏ –Ω–∞–º –Ω—É–∂–µ–Ω —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–æ—É—Ç–µ—Ä —Å –ø—É–±–ª–∏—á–Ω—ã–º IP –∞–¥—Ä–µ—Å–æ–º. 

* [**–ú–∏–∫—Ä–æ VDS –≤ –ù–∏–¥–µ—Ä–ª–∞–Ω–¥–∞—Ö –æ—Ç VDS.SH**](https://vds.sh) 
  * 1 —è–¥—Ä–æ Intel(R) Xeon(R) CPU E5-2680 v2 @ 2.80GHz
  * 768 –ú–ë –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏
  * –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è KVM 
  * 10 –ì–ë –º–µ—Å—Ç–∞ –Ω–∞ SSD-–¥–∏—Å–∫–µ
  * IPv4 –∞–¥—Ä–µ—Å, 8–¢–ë —Ç—Ä–∞—Ñ–∏–∫–∞
  * 150—Ä—É–± –≤ –º–µ—Å—è—Ü
  
‚ùóÔ∏è **–û—Ç —è–∑—ã–∫–∞ —Å–∞–π—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–ø–∞–Ω–∏–∏ - –†–æ—Å—Å–∏—è/–ï–≤—Ä–æ–ø–∞.**

### Initial configuration
üíø –°—Ç–∞–≤–∏–º Centos7 –±–µ–∑ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –ü–û.
–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –Ω–∞—á–Ω–µ—Ç—Å—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.
–ü—Ä–æ—Ü–µ—Å—Å –∑–∞–π–º–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.

![startconfing](/img/002.png)

üìù –ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –ø–æ—è–≤–∏—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è" - –Ω–∞–∂–∏–º–∞–µ–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–º

> **–ê–∫—Ç–∏–≤–∞—Ü–∏—è –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞**
>  - –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –ö–µ–≤–∏–Ω!
>  –ù–∞—Å—Ç–æ—è—â–∏–º –ø–∏—Å—å–º–æ–º —É–≤–µ–¥–æ–º–ª—è–µ–º, —á—Ç–æ –Ω–∞ –≤–∞—à–µ –∏–º—è –±—ã–ª –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –°–µ—Ä–≤–µ—Ä.
>  –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º —Ä–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –¥–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º.

> **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ c–µ—Ä–≤–µ—Ä–µ:** - üîê
>   * IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞: 91.xxx.xxx.xxx
>   * –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: root
>   * –ü–∞—Ä–æ–ª—å: 0xm1Jej3xxxx

> **VMmanager - –≤–Ω–µ—à–Ω—è—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–º** - üîê
>    - –°—Å—ã–ª–∫–∞: https://vm-nl.vds.sh/vmmgr
>    - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: yourname
>    - –ü–∞—Ä–æ–ª—å: gjQeB212xxxx

### PuTTY 
üõ† –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∞–∫–µ—Ç —É—Ç–∏–ª–∏—Ç [PuTTY](https://www.putty.org)

#### PuTTYgen
 * –ó–∞–ø—É—Å–∫–∞–µ–º PuTTYgen - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–ª—é—á–µ–π
 * –í—ã–±–∏—Ä–∞–µ–º RSA —Å —Ä–∞–∑–º–µ—Ä–æ–º –∫–ª—é—á–∞ 2048
 * –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–≤—è–∑–∫—É –∫–ª—é—á–µ–π –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É
 * –ñ–º–µ–º ¬´Generate¬ª –∏ –¥–≤–∏–≥–∞–µ–º –∫—É—Ä—Å–æ—Ä–æ–º –ø–æ –ø—É—Å—Ç–æ–º—É –ø–æ–ª—é –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏.

![startconfing](/img/008.png)

#### Private Key
 * –í–≤–æ–¥–∏–º —Å–≤–æ–π –ø–∞—Ä–æ–ª—å –¥–ª—è –∑–∞—â–∏—Ç—ã —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞.
 * –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É `openvpn` –≤ `–î–æ–∫—É–º–µ–Ω—Ç—ã`, –≤ –Ω–µ–µ –º—ã —Å–æ—Ö—Ä–∞–Ω–∏–º —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á.
 * –ñ–º–µ–º `¬´Save private key¬ª`, –Ω–∞–∑—ã–≤–∞–µ–º —Ñ–∞–π–ª `rsa.ppk`
 * –î–∞–Ω–Ω—ã–π –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ –∏ –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –≤–∞—à–∏–º –ø–∞—Ä–æ–ª–µ–º.
 * **–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –≤–∞—à–µ–º –ü–ö –∏ –Ω–∏–≥–¥–µ –±–æ–ª—å—à–µ.**

![startconfing](/img/009.png)

#### Public Key
 * –í—ã–¥–µ–ª—è–µ–º –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ–∫–Ω–∞ —Å –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º
 * –ö–æ–ø–∏—Ä—É–µ–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –Ω–∞ —Ä–∞–±–æ—á–∏–π —Å—Ç–æ–ª
 * –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≥–¥–µ —É–≥–æ–¥–Ω–æ (—Ç–∞–∫ –∂–µ –∫–∞–∫ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –µ–º–µ–π–ª –∏–ª–∏ id —Å—Ç—Ä–∞–Ω–∏—Ü—ã)

![startconfing](/img/010.png)

#### SSH: Secure Shell
* –ó–∞–ø—É—Å–∫–∞–µ–º PuTTY
* –í–≤–æ–¥–∏–º IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∂–º–µ–º 'Open'
* –ù–∞ Security Alert –∂–º–µ–º "–î–∞"
* –í–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è(root) –∏ –ø–∞—Ä–æ–ª—å

![startconfing](/img/005.png)

#### First Start Setup
* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º git –∏ —Å–∫–∞—á–∏–≤–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
```bash
yum install git -y
git clone https://github.com/mediatube/openvpn.git
cd openvpn
```
* –î–æ–±–∞–≤–ª—è–µ–º —Å–≤–æ–π –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä - —Ñ–æ—Ä–º–∏—Ä—É–µ–º –∫–æ–º–∞–Ω–¥—É –≤ –±–ª–æ–∫–Ω–æ—Ç–µ
```bash
echo "–ü–£–ë–õ–ò–ß–ù–´–ô_–ö–õ–Æ–ß" > authorized_keys
```
* –ö–æ–ø–∏—Ä—É–µ–º –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –∏–∑ —Ñ–∞–π–ª–∞ –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ –≤–Ω—É—Ç—Ä—å –∫–∞–≤—ã—á–µ–∫
* –ü–æ—Å–ª–µ —á–µ–≥–æ –∫–æ–ø–∏—Ä—É–µ–º –≤—Å—é –∫–æ–º–∞–Ω–¥—É –∏ –≤—Å—Ç–∞–≤–ª—è–µ–º –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª

![startconfing](/img/011.png)

* –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫—É –¥–æ—Å—Ç—É–ø–∞ –ø–æ ssh
```bash
python openvpn/setup_ssh.py -u username
```
* –ó–∞–ø–æ–º–∏–Ω–∞–µ–º/–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –Ω–æ–≤—ã–π –ø–æ—Ä—Ç
* –ü—Ä–∏–¥—É–º—ã–≤–∞–µ–º –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

![startconfing](/img/012.png)

![startconfing](/img/013.png)
* –ó–∞–≥—Ä—É–∂–∞–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ OpenVPN
```bash 


wget https://raw.githubusercontent.com/mediatube/openvpn/master/openvpn-install.sh

bash openvpn-install.sh
```
* –ó–∞–¥–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç–≤–µ—á–∞—è –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Å–∫—Ä–∏–ø—Ç–∞

![startconfing](/img/006.png)

* –ó–∞–ø—É—Å–∫–∞–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É –Ω–∞–∂–∞—Ç–∏–µ–º –ª—é–±–æ–π –∫–Ω–æ–ø–∫–∏, –≤ –∫–æ–Ω—Ü–µ –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞:
```bash
Your client configuration is available at: /root/client-amst-udp1.1.ovpn
```
* –ö–æ–ø–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥ —Å —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä
```bash
win-cmd>scp root@91.xxx.xxx.xxx:/root/client-amst-udp1.1.ovpn C:\\Users\\youruser
```

### OpenVPN Client
* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–ª–∏–µ–Ω—Ç OpenVPN

https://openvpn.net/community-downloads/

* –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥ –∏ –ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ VPN

**TODO:**
### RSA e.t.c.
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–ª—é—á–∏, –∑–∞—â–∏—â–∞–µ–º ssh, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è RSA –∫–ª—é—á–µ–π, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ RSA, —Å–∫—Ä–∏–ø—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤, –ø—Ä–æ–∫—Å–∏